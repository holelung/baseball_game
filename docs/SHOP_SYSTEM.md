# 상점 시스템 설계

## 개요

투수를 강판시키며 획득한 포인트를 골드로 변환하여 팀을 강화하는 시스템.

---

## 1. 재화 시스템

### 포인트 → 골드 변환

| 구분 | 설명 |
|------|------|
| **포인트 (P)** | 게임 중 획득하는 점수. 투수 강판 목표에 사용 |
| **골드 (G)** | 상점에서 사용하는 재화 |

**변환 규칙:**
- 상점 오픈 시점에 "누적 포인트"가 골드로 변환됨
- 투수 강판 목표 달성과는 별개 (목표는 해당 투수에게 획득한 P 기준)
- 변환 비율: `1P = 1G` (또는 조정 가능)

**예시:**
```
1이닝: 50P 획득 → 상점에서 50G 사용 가능
2이닝: 30P 획득 → 누적 80G (50G 썼으면 30G)
투수 강판: 보너스 골드 지급
```

---

## 2. 상점 오픈 시점

| 시점 | 조건 | 상점 등급 |
|------|------|----------|
| **이닝 종료** | 3아웃 | 기본 |
| **투수 강판** | 투수 목표 P 달성 | 중급 |
| **스테이지 클리어** | 모든 투수 강판 | 고급 |

### 등급별 차이 (추후 구체화)
- 기본: 일반/희귀 아이템
- 중급: 영웅 아이템 등장
- 고급: 전설 아이템 등장, 특별 아이템

---

## 3. 상점 아이템 분류

### 3.1 선수카드

새로운 선수를 영입하여 선수덱에 추가.

| 등급 | 가격 | 출현 확률 |
|------|------|----------|
| 일반 (Common) | 50G | 50% |
| 희귀 (Rare) | 100G | 30% |
| 영웅 (Epic) | 200G | 15% |
| 전설 (Legendary) | 500G | 5% |

**선수덱 규칙:**
- 시작: 9명
- 최대: 12명
- 12명 초과 시 기존 선수와 교체 필요
- 교체된 선수는 영구 퇴장

### 3.2 선수강화

기존 선수의 능력치를 강화.

| 강화 종류 | 효과 | 가격 |
|----------|------|------|
| 타율 훈련 | 타율 +0.01~0.03 | 100G |
| 파워 훈련 | 파워 +1 | 80G |
| 스피드 훈련 | 스피드 +1 | 80G |
| 능력 강화 | 고유 능력 효과 증가 | 150G |
| 새 능력 부여 | 능력 없는 선수에게 능력 추가 | 200G |

### 3.3 액션카드 강화

액션 카드 또는 족보를 강화.

| 강화 종류 | 효과 | 가격 |
|----------|------|------|
| 카드 강화 | 특정 속성 카드 보너스 +5P | 50G |
| 모드 강화 | 특정 모드 보너스 +10P | 100G |
| 카드 추가 | 덱에 특정 속성 카드 추가 | 80G |
| 카드 제거 | 덱에서 원치 않는 카드 제거 | 30G |

### 3.4 코치

게임 플레이 방향성에 영향을 주는 영구 효과.
(Balatro의 조커 역할)

| 코치 예시 | 효과 |
|----------|------|
| 타격 코치 | 모든 선수 타율 +0.02 |
| 파워 코치 | 장타 확률 +10% |
| 주루 코치 | 스피드 플레이 모드 보너스 +15P |
| 전략 코치 | 버리기 횟수 +1 |
| 정신력 코치 | 2사 상황에서 안타 확률 +10% |
| 분석 코치 | 다음 3명의 선수덱 순서 공개 |

**코치 슬롯:**
- 최대 보유: 5개 (추후 조정)
- 중복 불가

### 3.5 바우처

상점 또는 게임 시스템에 영구적인 변화.

| 바우처 예시 | 효과 |
|------------|------|
| 대량 구매 | 상점 아이템 +1개 표시 |
| 할인권 | 모든 가격 10% 할인 |
| 선수단 확장 | 최대 선수 +1 (→13명) |
| VIP | 상점에 희귀 아이템 확률 증가 |
| 재계약 | 교체된 선수 1명 복귀 가능 |

---

## 4. 상점 UI 구조

```
┌─────────────────────────────────────┐
│  상점 - 이닝 종료 (기본)    💰 150G  │
├─────────────────────────────────────┤
│                                     │
│  [선수카드]  [선수강화]  [액션강화]  │
│                                     │
│  ┌─────┐  ┌─────┐  ┌─────┐         │
│  │ 🧑 │  │ 🧑 │  │ 💪 │  ...     │
│  │김도윤│  │이시우│  │파워+1│        │
│  │ 희귀 │  │ 일반 │  │ 80G │        │
│  │100G │  │ 50G │  │     │        │
│  └─────┘  └─────┘  └─────┘         │
│                                     │
│  [코치]  [바우처]                    │
│                                     │
│  ┌─────┐  ┌─────┐                  │
│  │ 👨‍🏫 │  │ 🎫 │                  │
│  │타격  │  │할인권│                  │
│  │코치  │  │     │                  │
│  │200G │  │150G │                  │
│  └─────┘  └─────┘                  │
│                                     │
│         [ 상점 닫기 ]               │
└─────────────────────────────────────┘
```

---

## 5. 구현 우선순위

### Phase 1: MVP
- [ ] 골드 시스템 (포인트 → 골드 변환)
- [ ] 상점 UI 기본
- [ ] 선수카드 구매 (playerPool.ts 활용)
- [ ] 선수덱 추가/교체 (최대 12명)

### Phase 2: 확장
- [ ] 선수강화
- [ ] 액션카드 강화
- [ ] 상점 등급별 아이템 차등

### Phase 3: 완성
- [ ] 코치 시스템
- [ ] 바우처 시스템
- [ ] 상점 오픈 시점별 연출

---

## 6. 미결정 사항

| 항목 | 상태 | 메모 |
|------|------|------|
| 상점 등급별 아이템 차이 | 미정 | 추후 구체화 |
| 골드 변환 비율 | 1:1 | 밸런스 테스트 후 조정 |
| 코치 최대 보유 수 | 5개 | 밸런스 테스트 후 조정 |
| 바우처 영구 효과 범위 | 미정 | 스테이지/런 단위 결정 필요 |

---

## 버전 히스토리

| 버전 | 날짜 | 변경사항 |
|------|------|----------|
| 0.1.0 | 2025-01-20 | 초안 작성 |
